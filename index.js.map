{"version":3,"file":"index.js","sourceRoot":"","sources":["index.ts"],"names":[],"mappings":"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","sourcesContent":["require('dotenv');\nimport axios from 'axios';\nimport cheerio from 'cheerio';\n// const { MongoClient } = require('mongodb');\n// const uri = \"mongodb+srv://credBotCell:Travieso09465@cluster0.itmor.mongodb.net/myFirstDatabase?retryWrites=true&w=majority\";\n// const clientMongo = new MongoClient(uri, { useNewUrlParser: true, useUnifiedTopology: true });\n\n\n// clientMongo.connect(err:any => {\n//   const collection = client.db(\"test\").collection(\"devices\");\n//   // perform actions on the collection object\n//   client.close();\n// });\n\n\n// const tokenBot = process.env['BOTTOKEN'];\n\n// const users: Object | any = {};\n// //sum 2 \n\nlet precioDollar: number = 115;\n\n\nfunction getPrecioDollar():number{\n  let lastPrecioDollar: number =  precioDollar;\n  // let channel: any =client.channels.fetch(\"933069296731574294\");\n\n  // let lastMessage:string  = channel.lastMessage.content;\n\n  // let lastMessageSplitted:Array<string> = lastMessage.split(\" \");\n  // if(lastMessage.startsWith(\"!setdollar\") && lastMessageSplitted.length == 2){\n  //   let value:number = +lastMessageSplitted[1];\n  //   if(value>0){\n  //     lastPrecioDollar = value;\n  //   }\n  // }\n\n\n  return lastPrecioDollar;\n}\n\n\nconst fs = require('fs');\nconst { Client, Collection, Intents } = require('discord.js');\nconst client = new Client({ intents: [Intents.FLAGS.GUILDS, Intents.FLAGS.GUILD_MESSAGES] });\n// const keepAlive = require(\"server\");\n\nclient.on('ready', () => {\n  console.log(\"I'm running\");\n});\n\n// client.on('message', (msg: any) => {\n//   console.log(\"msg\");\n//   if (msg.author.id != client.user.id) {\n\n//     msg.channel.send(`Estoy a prueba, ignorame`);\n//   }\n\n// }\n// );\nlet costoCajas: Object | any = {\n\n  // \"magma\": 1.00,a\n  \"z3x\": 1.145,\n  \"octoplus\": 0.115,\n  \"chimera\": 0.122,\n  \"samkey-tm-spr\": 1.4,\n  \"samkey-code-reader\": 1.47,\n  \"t-unlock\": 0.42,\n  \"unlocktool\": 0,\n  // \"motokey\":1.11,a\n  // \"laelo\":0.07,a\n  \"simunlocker-pro\": 1.24,\n  \"simunlocker-spr\": 1.24,\n  // \"magict\":1.1,a\n  \"samhub\": 1\n\n}\n\nclient.on('message', (msg: any) => {\n  console.log(\"msg\");\n  let lastPrecioDollar = getPrecioDollar();\n  if (msg.author.id != client.user.id) {\n    if (msg.content.startsWith('!cred')) {\n      //  console.log(`Hola ${msg.channel.name}`);\n      if (costoCajas.hasOwnProperty(`${msg.channel.name}`)) {\n        let vals: string[] = msg.content.split(' ');\n        if (vals.length > 1) {\n          var y: number = +(vals[1]);\n\n          var total: number = (Math.round(((costoCajas[msg.channel.name]) * lastPrecioDollar * y + 4) / 10)) * 10;\n          console.log(msg);\n          msg.channel.send(`Son ${total} CUP `);\n        }\n        else {\n          msg.channel.send(`Creo que hay algo mal con ese comando`);\n        }\n\n      }\n      else {\n        msg.channel.send(`No tengo datos del servicio ${msg.channel.name}`);\n      }\n      // console.log(msg.channel.name);\n    }\n    else {\n      if (msg.content.startsWith('!dollar')) {\n        msg.channel.send(`Original: ${precioDollar} CUP\\nActual: ${lastPrecioDollar} CUP`);\n      }\n      else {\n        if (msg.content.startsWith('!remoto')) {\n          let splittedMsg: Array<string> = msg.content.split(\" \");\n          let filterWords:string = \"\";\n          if(splittedMsg.length>1){\n            splittedMsg.shift();\n            filterWords = splittedMsg.join(' ');\n          }\n          getPriceRay(filterWords,msg);\n          \n        }\n      }\n\n    }\n\n  }\n});\n\ninterface ServicePrice {\n    val: number; \n    name: string;\n    type: string;\n    time:string;\n  }\n\n\n\n// ; \nconst AxiosInstance = axios.create(); // Create a new Axios Instance\n\n\nfunction getPriceRay(filterText:string, msg:any){\n  const urlList: Array<string> = \n  ['https://rayunlocker.com/index.php/resellerpricing/imei',\n  'https://rayunlocker.com/index.php/resellerpricing/server',\n  'https://rayunlocker.com/index.php/resellerpricing/remote',\n  'https://rayunlocker.com/index.php/resellerpricing/file'\n  ];\n  urlList.forEach(function(url){\n    let lastPrecioDollar:number = getPrecioDollar();\n    // Send an async HTTP Get request to the url\n    AxiosInstance.get(url)\n      .then( // Once we have data returned ...\n        response => {\n            let services: Array<ServicePrice> = [];\n         \n            const html = response.data; // Get the HTML from the HTTP request\n            const $ = cheerio.load(html); // Load the HTML string into cheerio\n            const row: any = $('tr.service'); // Parse the HTML and extract just whatever code contains .statsTableContainer and has tr inside\n              \n              \n            row.each((i:number, elem:any) => {\n              let serv: ServicePrice ={name:\"\",val:0,type:\"ray\",time:\"\"};\n              serv.name = $(elem).find('td>a').text()\n              serv.time= $(elem).find('td.text-center>span').text().trim(); // \n              serv.val =  (+$(elem).find('td.text-right>span.nowrap').text().replace(\"USD\",\"\").trim())* lastPrecioDollar;\n              if(filterText!=\"\" && serv.name.toLowerCase().includes(filterText.toLowerCase())){\n                  services.push(serv);\n              }\n              else{\n                if(filterText==\"\"){\n                    services.push(serv);\n                }\n              }\n              \n        }\n        \n      )//930888553972514826\n      if(services.length>0){\n        let mensaje:string =servicePriceListToString(services);\n        if(mensaje.length<1500){\n          msg.channel.send(mensaje);\n          }\n          else{\n            msg.channel.send(\"Son muchos los resultados.........\");\n          }\n      }\n      else{\n        msg.channel.send(`No se encontraron servicios con ese nombre :(`)\n      }\n      \n        });\n    }\n  );\n}\n\nfunction servicePriceListToString(services: Array<ServicePrice>): string{\n  return services.reduce((previusValue:string,currentValue: ServicePrice)=>`${previusValue}\\n ${currentValue.name} ${currentValue.time} ${currentValue.val}`,\"\");\n}\n\n\n//keepAlive();\nconsole.log(\"antes de\");\nclient.login(process.env.DISCORD_TOKEN);\n"]}